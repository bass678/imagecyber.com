<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediaFlow AI | All-in-One Editor</title>
    <link href="https://fonts.googleapis.com" rel="stylesheet">
    <!-- Cropper.js for professional cropping -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com">
    <style>
        :root {
            --primary: #8b5cf6;
            --bg: #030712;
            --card: #111827;
            --text: #f9fafb;
            --dim: #9ca3af;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Plus Jakarta Sans', sans-serif; }
        body { background: var(--bg); color: var(--text); min-height: 100vh; padding: 40px 20px; }

        .container { max-width: 700px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 40px; }
        h1 { font-size: 36px; font-weight: 800; letter-spacing: -1px; margin-bottom: 10px; }
        .accent { color: var(--primary); }

        /* Tab Navigation */
        .tabs { display: flex; gap: 10px; margin-bottom: 30px; overflow-x: auto; padding-bottom: 10px; }
        .tab-btn {
            background: #1f2937;
            border: 1px solid #374151;
            color: var(--dim);
            padding: 10px 20px;
            border-radius: 99px;
            cursor: pointer;
            white-space: nowrap;
            transition: 0.3s;
        }
        .tab-btn.active { background: var(--primary); color: white; border-color: var(--primary); }

        /* Main Card */
        .card {
            background: var(--card);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 24px;
            padding: 30px;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
        }

        .tool-panel { display: none; }
        .tool-panel.active { display: block; }

        /* Inputs & Controls */
        input[type="file"], input[type="number"], textarea, select {
            width: 100%;
            padding: 12px;
            background: #030712;
            border: 1px solid #374151;
            border-radius: 12px;
            color: white;
            margin: 10px 0 20px 0;
            outline: none;
        }

        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        label { font-size: 12px; font-weight: 700; color: var(--dim); text-transform: uppercase; }

        .action-btn {
            width: 100%;
            padding: 16px;
            background: var(--primary);
            border: none;
            border-radius: 14px;
            color: white;
            font-weight: 700;
            cursor: pointer;
            transition: 0.3s;
        }
        .action-btn:hover { filter: brightness(1.2); transform: translateY(-2px); }

        #cropPreviewContainer { max-height: 400px; margin-bottom: 20px; overflow: hidden; }
        #cropPreview { max-width: 100%; }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>MediaFlow <span class="accent">Pro</span></h1>
            <p style="color: var(--dim)">Professional utilities for images and documents</p>
        </header>

        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('resize')">Resize/Optimize</button>
            <button class="tab-btn" onclick="showTab('crop')">Crop</button>
            <button class="tab-btn" onclick="showTab('imgpdf')">Image to PDF</button>
            <button class="tab-btn" onclick="showTab('txtpdf')">Text to PDF</button>
        </div>

        <div class="card">
            <!-- Resize & Optimize -->
            <div id="resize" class="tool-panel active">
                <label>Upload Image</label>
                <input type="file" id="resizeInput" accept="image/*">
                <div class="grid">
                    <div>
                        <label>Width (px)</label>
                        <input type="number" id="resizeWidth" placeholder="Auto">
                    </div>
                    <div>
                        <label>Quality (1-100)</label>
                        <input type="number" id="resizeQuality" value="80">
                    </div>
                </div>
                <button class="action-btn" onclick="processResize()">Optimize & Download</button>
            </div>

            <!-- Crop -->
            <div id="crop" class="tool-panel">
                <label>Upload Image to Crop</label>
                <input type="file" id="cropInput" accept="image/*">
                <div id="cropPreviewContainer">
                    <img id="cropPreview">
                </div>
                <button class="action-btn" onclick="downloadCrop()">Crop & Download</button>
            </div>

            <!-- Image to PDF -->
            <div id="imgpdf" class="tool-panel">
                <label>Select Images</label>
                <input type="file" id="imgPdfInput" accept="image/*" multiple>
                <p style="font-size: 12px; color: var(--dim); margin-bottom: 15px;">Multiple images will be merged into one PDF.</p>
                <button class="action-btn" onclick="processImgToPdf()">Convert to PDF</button>
            </div>

            <!-- Text to PDF -->
            <div id="txtpdf" class="tool-panel">
                <label>Enter Document Text</label>
                <textarea id="pdfText" rows="8" placeholder="Type or paste your content here..."></textarea>
                <button class="action-btn" onclick="processTextToPdf()">Create PDF Document</button>
            </div>
        </div>
    </div>

    <!-- Essential Libraries -->
    <script src="https://cdnjs.cloudflare.com"></script>
    <script src="https://cdnjs.cloudflare.com"></script>

    <script>
        const { jsPDF } = window.jspdf;
        let cropper;

        // Tab Switcher Logic
        function showTab(tabId) {
            document.querySelectorAll('.tool-panel').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        // 1. Resize & Optimize Logic
        async function processResize() {
            const file = document.getElementById('resizeInput').files[0];
            if (!file) return alert("Please select a file");

            const width = document.getElementById('resizeWidth').value;
            const quality = document.getElementById('resizeQuality').value / 100;

            const img = new Image();
            img.src = URL.createObjectURL(file);
            img.onload = () => {
                const canvas = document.createElement('canvas');
                const scale = width ? (width / img.width) : 1;
                canvas.width = img.width * scale;
                canvas.height = img.height * scale;
                
                const ctx = canvas.getContext('2d');
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                
                const link = document.createElement('a');
                link.download = 'optimized-image.jpg';
                link.href = canvas.toDataURL('image/jpeg', quality);
                link.click();
            };
        }

        // 2. Cropper Logic
        document.getElementById('cropInput').onchange = (e) => {
            const file = e.target.files[0];
            const reader = new FileReader();
            reader.onload = (event) => {
                const img = document.getElementById('cropPreview');
                img.src = event.target.result;
                if (cropper) cropper.destroy();
                cropper = new Cropper(img, { aspectRatio: NaN });
            };
            reader.readAsDataURL(file);
        };

        function downloadCrop() {
            if (!cropper) return alert("Upload an image first");
            const canvas = cropper.getCroppedCanvas();
            const link = document.createElement('a');
            link.download = 'cropped.png';
            link.href = canvas.toDataURL();
            link.click();
        }

        // 3. Image to PDF
        async function processImgToPdf() {
            const files = document.getElementById('imgPdfInput').files;
            if (files.length === 0) return alert("Select images");

            const pdf = new jsPDF();
            for (let i = 0; i < files.length; i++) {
                const imgData = await fileToDataURL(files[i]);
                if (i > 0) pdf.addPage();
                pdf.addImage(imgData, 'JPEG', 10, 10, 190, 0); // Auto height
            }
            pdf.save("images-combined.pdf");
        }

        // 4. Text to PDF
        function processTextToPdf() {
            const text = document.getElementById('pdfText').value;
            if (!text) return alert("Enter text");
            const pdf = new jsPDF();
            pdf.text(text, 10, 10, { maxWidth: 180 });
            pdf.save("document.pdf");
        }

        // Helper
        function fileToDataURL(file) {
            return new Promise((resolve) => {
                const reader = new FileReader();
                reader.onload = (e) => resolve(e.target.result);
                reader.readAsDataURL(file);
            });
        }
    </script>
    <script>
  atOptions = {
    'key' : '67cb3df59f085e87e56c9c798ddc5c4f',
    'format' : 'iframe',
    'height' : 90,
    'width' : 728,
    'params' : {}
  };
</script>
<script src="https://www.highperformanceformat.com/67cb3df59f085e87e56c9c798ddc5c4f/invoke.js"></script>
</body>
</html>
